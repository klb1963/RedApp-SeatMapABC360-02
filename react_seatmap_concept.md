# üõ´ React Seat Map ‚Äì Fallback Rendering Concept

## üìå –¶–µ–ª—å

üîπ –ü–æ—Å—Ç—Ä–æ–∏—Ç—å –≤–∏–∑—É–∞–ª—å–Ω–æ–µ –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω–∏–µ —Å—Ö–µ–º—ã —Å–∞–ª–æ–Ω–∞ —Å–∞–º–æ–ª–µ—Ç–∞ –Ω–∞ –æ—Å–Ω–æ–≤–µ **–¥–∞–Ω–Ω—ã—Ö –∏–∑ Sabre (**``**)**, –µ—Å–ª–∏ –ø–æ –∫–∞–∫–æ–π-–ª–∏–±–æ –ø—Ä–∏—á–∏–Ω–µ –Ω–µ—Ç –æ—Ç–≤–µ—Ç–∞ –æ—Ç `quicket.io`.

üîπ –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç:

- –∫–æ—Ä—Ä–µ–∫—Ç–Ω—É—é —Å—Ç—Ä—É–∫—Ç—É—Ä—É —Ä—è–¥–æ–≤,
- –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –ø—Ä–æ—Ö–æ–¥–æ–≤ (aisles),
- –≤—ã–¥–µ–ª–µ–Ω–∏–µ –≤—ã–±—Ä–∞–Ω–Ω–æ–≥–æ –∫—Ä–µ—Å–ª–∞,
- –±–ª–æ–∫–∏—Ä–æ–≤–∫—É –∑–∞–Ω—è—Ç—ã—Ö/–∑–∞–±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö –º–µ—Å—Ç.

---

## üßπ –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞

### 1. `Seatmap.tsx` (`/internal/Seatmap.tsx`)

üîπ –ì–ª–∞–≤–Ω—ã–π –≤–∏–∑—É–∞–ª—å–Ω—ã–π –∫–æ–º–ø–æ–Ω–µ–Ω—Ç, –æ—Ç–≤–µ—á–∞—é—â–∏–π –∑–∞ –æ—Ç—Ä–∏—Å–æ–≤–∫—É:

- –≤—Å–µ—Ö —Ä—è–¥–æ–≤ (`rows: Row[]`)
- –≤–Ω—É—Ç—Ä–∏ —Ä—è–¥–∞ ‚Äî –∫—Ä–µ—Å–µ–ª –∏ –ø—Ä–æ—Ö–æ–¥–æ–≤ (`seats: Seat[]`)

#### –ò–Ω—Ç–µ—Ä—Ñ–µ–π—Å—ã:

```ts
interface Seat {
  id: string;           // —É–Ω–∏–∫–∞–ª—å–Ω—ã–π ID ("12C")
  number?: string;      // –±—É–∫–≤–∞ –∫—Ä–µ—Å–ª–∞ ("C")
  isReserved?: boolean; // –±–ª–æ–∫–∏—Ä–æ–≤–∫–∞
  tooltip?: string;     // —Ç–µ–∫—Å—Ç –ø–æ–¥—Å–∫–∞–∑–∫–∏
}

interface Row {
  rowNumber: number;
  seats: Seat[];
}
```

#### –û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏:

- –ü—Ä–æ—Ö–æ–¥—ã —Ä–µ–∞–ª–∏–∑—É—é—Ç—Å—è –∫–∞–∫ `Seat` —Å `number: undefined` –∏ –±–µ–∑ `onClick`.
- –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –≤—ã–±—Ä–∞–Ω–Ω–æ–≥–æ –º–µ—Å—Ç–∞ –ø–æ `selectedSeatId`.

---

### 2. `ReactSeatMapRenderer.tsx`

üîπ –û–±—ë—Ä—Ç–∫–∞ –¥–ª—è `Seatmap`, –ø–µ—Ä–µ–¥–∞—ë—Ç:

- `rows` ‚Äî –º–∞—Å—Å–∏–≤ `Row[]`
- `selectedSeatId` ‚Äî —Ç–µ–∫—É—â–µ–µ –≤—ã–±—Ä–∞–Ω–Ω–æ–µ –º–µ—Å—Ç–æ
- `onSeatSelect` ‚Äî callback –ø—Ä–∏ –≤—ã–±–æ—Ä–µ –º–µ—Å—Ç–∞

---

### 3. `ReactSeatMapModal.tsx`

üîπ –¢–µ—Å—Ç–æ–≤–∞—è –º–æ–¥–∞–ª–∫–∞ –≤ RedApp:

- –ó–∞–≥—Ä—É–∂–∞–µ—Ç PNR —á–µ—Ä–µ–∑ `loadPnrDetailsFromSabre`
- –ó–∞–≥—Ä—É–∂–∞–µ—Ç –∫–∞—Ä—Ç—É –º–µ—Å—Ç —á–µ—Ä–µ–∑ `loadSeatMapFromSabre` (`EnhancedSeatMapRQ`)
- –ü—Ä–æ–≥–æ–Ω—è–µ—Ç `seatInfo` —á–µ—Ä–µ–∑ `convertSeatMapToReactSeatmapFormat`

#### –¶–∏–∫–ª:

```ts
useEffect(() => {
  1. –ó–∞–≥—Ä—É–∂–∞–µ–º PNR
  2. –û–±–æ–≥–∞—â–∞–µ–º –ø–∞—Å—Å–∞–∂–∏—Ä–æ–≤
  3. –ó–∞–≥—Ä—É–∂–∞–µ–º SeatMap (EnhancedSeatMapRQ)
  4. –ü—Ä–µ–æ–±—Ä–∞–∑—É–µ–º –≤ Row[]
  5. –ü–µ—Ä–µ–¥–∞—ë–º –≤ <Seatmap />
}, []);
```

---

## üßê –û–±—Ä–∞–±–æ—Ç–∫–∞ –ø—Ä–æ—Ö–æ–¥–æ–≤ (AISLE)

üîπ –í XML-—Å—Ç—Ä—É–∫—Ç—É—Ä–µ Sabre –∏—â–µ–º `Location.Detail code="A"` –∏/–∏–ª–∏ `<Characteristics>description="Aisle"</Characteristics>`. üîπ –ü–æ–∑–∏—Ü–∏—è –ø—Ä–æ—Ö–æ–¥–∞ –º–µ–∂–¥—É –±—É–∫–≤–∞–º–∏ –æ–±–æ–∑–Ω–∞—á–∞–µ—Ç—Å—è `AISLE`, –∫–æ—Ç–æ—Ä—ã–π –≤—Å—Ç–∞–≤–ª—è–µ—Ç—Å—è –≤ Row:

```ts
{
  id: `AISLE-${rowNumber}-${index}`,
  number: undefined,
  isReserved: true
}
```

---

## üí† –ü—Ä–∏–º–µ—Ä Row

```ts
{
  rowNumber: 12,
  seats: [
    { id: '12A', number: 'A', isReserved: false },
    { id: '12B', number: 'B', isReserved: true },
    { id: '12C', number: 'C', isReserved: false },
    { id: 'AISLE-12-1', isReserved: true },
    { id: '12D', number: 'D', isReserved: false },
    { id: '12E', number: 'E', isReserved: false },
    { id: '12F', number: 'F', isReserved: false }
  ]
}
```

---

## ü•Æ –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ:

```
   12   [A] [B] [C]   |   [D] [E] [F]
                    ^ AISLE (gap)
```

---

## ‚úÖ –ö–æ–Ω–µ—á–Ω—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç

üîπ –ö–æ–º–ø–æ–Ω–µ–Ω—Ç `Seatmap`

- –ø—Ä–∏–Ω–∏–º–∞–µ—Ç Row[]
- —Ä–µ–Ω–¥–µ—Ä–∏—Ç –∫–∞—Ä—Ç—É –º–µ—Å—Ç
- –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç —Ñ–æ—Ä–º–∞—Ç `EnhancedSeatMapRQ`
- –Ω–µ –∑–∞–≤–∏—Å–∏—Ç –æ—Ç quicket.io

---

## üöÄ –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ

- –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –ª–µ–≥–µ–Ω–¥—ã (status colors)
- –ù–µ—Å–∫–æ–ª—å–∫–æ —Å–µ–∫—Ü–∏–π: business + economy (???)
- –°—Ç–∞—Ç—É—Å—ã: preferred / paid / exit-row etc.
- Drag & drop / –ø–µ—Ä–µ—Å–∞–¥–∫–∞ –ø–∞—Å—Å–∞–∂–∏—Ä–æ–≤

