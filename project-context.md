# üß† Project Context: RedApp module Seat Map ABC 360 

## üèóÔ∏è –°—Ç–µ–∫
- React + TypeScript (UI)
- Sabre Red 360 SDK (Eclipse / Tile Widgets)
- iframe-–∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å quicket.io
- SOAP/REST API Sabre (GetReservationRS, EnhancedSeatMapRQ, AirSeatLLSRQ)

---
## üìã –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞
- `/components/seatMap/SeatMapComponentBase.tsx` ‚Äì –±–∞–∑–æ–≤—ã–π –∫–æ–º–ø–æ–Ω–µ–Ω—Ç –∫–∞—Ä—Ç—ã –º–µ—Å—Ç
- `/components/seatMap/SeatMapComponentAvail.tsx` ‚Äì –∫–æ–º–ø–æ–Ω–µ–Ω—Ç —Å—Ü–µ–Ω–∞—Ä–∏—è Availability
- `/components/seatMap/panels/` ‚Äì UI-–ø–∞–Ω–µ–ª–∏ (PassengerPanel, SegmentSelector –∏ –¥—Ä.)
- `/components/seatMap/helpers/` ‚Äì —É—Ç–∏–ª–∏—Ç—ã (createPassengerPayload, postSeatMapUpdate –∏ –¥—Ä.)
- `/utils/normalizeSegment.ts` ‚Äì –Ω–æ—Ä–º–∞–ª–∏–∑–∞—Ü–∏—è —Å–µ–≥–º–µ–Ω—Ç–æ–≤
- `/transformers/getFlightFromSabreData.ts` ‚Äì –≥–µ–Ω–µ—Ä–∞—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö —Ä–µ–π—Å–∞ –¥–ª—è iframe

---
## üì¶ –ú–æ–¥–µ–ª–∏ –∏–ª–∏ —á—Ç–æ-—Ç–æ –∞–Ω–∞–ª–æ–≥–∏—á–Ω–æ–µ
- `FlightSegment` ‚Äì –æ–±—ä–µ–∫—Ç —Å–µ–≥–º–µ–Ω—Ç–∞ —Ä–µ–π—Å–∞ (raw –∏ normalized)
- `PassengerOption` ‚Äì –ø–∞—Å—Å–∞–∂–∏—Ä (id, label, nameNumber, type)
- `SelectedSeat` ‚Äì –≤—ã–±—Ä–∞–Ω–Ω–æ–µ –º–µ—Å—Ç–æ (passengerId, seatLabel –∏ –¥—Ä.)
- `FlightData` ‚Äì —Ñ–æ—Ä–º–∞—Ç –¥–ª—è iframe (id, airlineCode, departure, arrival, cabin –∏ –¥—Ä.)
- `SeatMapMessagePayload` ‚Äì —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ —Å–æ–æ–±—â–µ–Ω–∏—è postMessage –≤ iframe

---
## ‚úÖ –¢–µ–∫—É—â–∏–π —Å—Ç–∞—Ç—É—Å
- ‚úÖ –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –∫–∞—Ä—Ç—ã –º–µ—Å—Ç –≤ —Å—Ü–µ–Ω–∞—Ä–∏–∏ Availability —á–µ—Ä–µ–∑ iframe
- ‚úÖ –ü–æ–¥–¥–µ—Ä–∂–∫–∞ –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö —Å–µ–≥–º–µ–Ω—Ç–æ–≤ –∏ –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏—è –∫–ª–∞—Å—Å–æ–≤
- ‚úÖ –ö–æ—Ä—Ä–µ–∫—Ç–Ω–∞—è –≥–µ–Ω–µ—Ä–∞—Ü–∏—è flight-–¥–∞–Ω–Ω—ã—Ö –±–µ–∑ –ø–æ–≤—Ç–æ—Ä–Ω–æ–π –Ω–æ—Ä–º–∞–ª–∏–∑–∞—Ü–∏–∏
- ‚úÖ –ü–µ—Ä–µ–¥–∞—á–∞ config + flight + availability + passengers –≤ –±–∏–±–ª–∏–æ—Ç–µ–∫—É
- ‚úÖ –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ —Å—Ö–µ–º —Å–∞–ª–æ–Ω–∞ –∏ –≤—Å–µ—Ö –¥–æ—Å—Ç—É–ø–Ω—ã—Ö –º–µ—Å—Ç

---
## üß† –£—Ä–æ–∫–∏ –∏–∑ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏ –º–æ–¥—É–ª—è SeatMap ABC360

### ‚ùå –û—à–∏–±–∫–∏
1. **–ü–æ–≤—Ç–æ—Ä–Ω–∞—è –Ω–æ—Ä–º–∞–ª–∏–∑–∞—Ü–∏—è —É–∂–µ –Ω–æ—Ä–º–∞–ª–∏–∑–æ–≤–∞–Ω–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö**
   - –ü—Ä–∏–≤–æ–¥–∏–ª–∞ –∫ –ø–æ—Ç–µ—Ä–µ –ø–æ–ª–µ–π `duration`, `equipmentType`, `departureDate`.
2. **–°–º–µ—à–∏–≤–∞–Ω–∏–µ –Ω–æ—Ä–º–∞–ª–∏–∑–æ–≤–∞–Ω–Ω—ã—Ö –∏ raw-–¥–∞–Ω–Ω—ã—Ö**
   - –ù–∞—Ä—É—à–∞–ª–∞—Å—å —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –≤—Ö–æ–¥–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö –≤ `generateFlightData()`.
3. **–ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –∏–Ω–¥–µ–∫—Å–æ–≤ —Å–µ–≥–º–µ–Ω—Ç–æ–≤**
   - –°–±–∏–≤–∞–ª–∞—Å—å –ª–æ–≥–∏–∫–∞ –≤—ã–±–æ—Ä–∞ —Ç–µ–∫—É—â–µ–≥–æ —Å–µ–≥–º–µ–Ω—Ç–∞.

### ‚úÖ –†–µ—à–µ–Ω–∏—è
- –í—ã–ø–æ–ª–Ω—è—Ç—å –Ω–æ—Ä–º–∞–ª–∏–∑–∞—Ü–∏—é –æ–¥–∏–Ω —Ä–∞–∑, –ø—Ä–∏ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏.
- –•—Ä–∞–Ω–∏—Ç—å `rawSegments` –∏ `normalizedSegments` –æ—Ç–¥–µ–ª—å–Ω–æ.
- –í `generateFlightData()` –≤—Å–µ–≥–¥–∞ –ø–µ—Ä–µ–¥–∞–≤–∞—Ç—å raw-—Å–µ–≥–º–µ–Ω—Ç.
- –°–µ–≥–º–µ–Ω—Ç —Å –∏–Ω–¥–µ–∫—Å–æ–º `index` –∏–∑ –º–∞—Å—Å–∏–≤–∞ ‚Üí –æ–±–æ—Ä–∞—á–∏–≤–∞—Ç—å –≤ –º–∞—Å—Å–∏–≤ –∏ –ø–µ—Ä–µ–¥–∞–≤–∞—Ç—å —Å –∏–Ω–¥–µ–∫—Å–æ–º `0` –≤ `getFlightFromSabreData`.

### üìå –í—ã–≤–æ–¥—ã
| –û—à–∏–±–∫–∞                        | –£—Ä–æ–∫                                                             |
|------------------------------|------------------------------------------------------------------|
| –ü–æ–≤—Ç–æ—Ä–Ω–∞—è –Ω–æ—Ä–º–∞–ª–∏–∑–∞—Ü–∏—è       | –ù–æ—Ä–º–∞–ª–∏–∑—É–π –æ–¥–∏–Ω —Ä–∞–∑ –∏ —Ö—Ä–∞–Ω–∏ —Ä–µ–∑—É–ª—å—Ç–∞—Ç –∫–∞–∫ –∏—Å—Ç–æ—á–Ω–∏–∫ –ø—Ä–∞–≤–¥—ã.       |
| –°–º–µ—à–∞–Ω–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ             | –†–∞–∑–¥–µ–ª—è–π raw –∏ normalized –¥–∞–Ω–Ω—ã–µ. –ù–µ —Å–º–µ—à–∏–≤–∞–π.                   |
| –ü–ª–∞–≤–∞—é—â–∏–π –∏–Ω–¥–µ–∫—Å             | –ö–æ–Ω—Ç—Ä–æ–ª–∏—Ä—É–π –ª–æ–≥–∏–∫—É –∏–Ω–¥–µ–∫—Å–æ–≤ –∏ —Å–æ–±–ª—é–¥–∞–π source of truth.          |
| –ü–æ—Ç–µ—Ä—è –¥–∞–Ω–Ω—ã—Ö –≤ flight       | –ü—Ä–æ–≤–µ—Ä—è–π —Å—Ç—Ä—É–∫—Ç—É—Ä—É –ø–µ—Ä–µ–¥ –æ—Ç–ø—Ä–∞–≤–∫–æ–π –≤ visualization iframe.       |


## ‚úÖ –†–µ–∞–ª–∏–∑–∞—Ü–∏—è –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è SeatMap –≤ —Å—Ü–µ–Ω–∞—Ä–∏–∏ **Pricing**

**üìå –¶–µ–ª—å**  
–û—Ç–æ–±—Ä–∞–∂–∞—Ç—å —Å—Ö–µ–º—É —Å–∞–ª–æ–Ω–∞ (SeatMap) –≤ –º–æ–¥–∞–ª—å–Ω–æ–º –æ–∫–Ω–µ –ø–æ—Å–ª–µ –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è —ç—Ç–∞–ø–∞ —Ü–µ–Ω–æ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏—è (Pricing), –∏—Å–ø–æ–ª—å–∑—É—è –¥–∞–Ω–Ω—ã–µ –æ —Å–µ–≥–º–µ–Ω—Ç–µ —Ä–µ–π—Å–∞, –ø–µ—Ä–µ–¥–∞–Ω–Ω—ã–µ –≤ –∫–æ–Ω—Ç–µ–∫—Å—Ç–µ.

**üì¶ –ö–æ–º–ø–æ–Ω–µ–Ω—Ç—ã, —É—á–∞—Å—Ç–≤—É—é—â–∏–µ –≤ —Ü–µ–ø–æ—á–∫–µ**
- `PricingTile.ts`: –≤—ã–∑—ã–≤–∞–µ—Ç `PricingView` —á–µ—Ä–µ–∑ `IAirPricingService.createPricingTile(...)`
- `PricingView.ts`: –º–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ, –≤ –∫–æ—Ç–æ—Ä–æ–º —Ä–µ–Ω–¥–µ—Ä–∏—Ç—Å—è `SeatMapComponentPricing`
- `SeatMapComponentPricing.tsx`: –æ–±—ë—Ä—Ç–∫–∞, –ø–æ–ª—É—á–∞—é—â–∞—è —Å–µ–≥–º–µ–Ω—Ç —Ä–µ–π—Å–∞ (`flightSegments[selectedSegmentIndex]`), –Ω–æ—Ä–º–∞–ª–∏–∑—É—é—â–∞—è –µ–≥–æ –∏ –ø–µ—Ä–µ–¥–∞—é—â–∞—è –≤ `SeatMapComponentBase`
- `SeatMapComponentBase.tsx`: –±–∞–∑–æ–≤—ã–π –∫–æ–º–ø–æ–Ω–µ–Ω—Ç, –∫–æ—Ç–æ—Ä—ã–π –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä—É–µ—Ç –≤–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏—é –∫–∞—Ä—Ç—ã –º–µ—Å—Ç, –æ—Ç–ø—Ä–∞–≤–ª—è—è –¥–∞–Ω–Ω—ã–µ –≤ iframe (–±–∏–±–ª–∏–æ—Ç–µ–∫–∞ quicket.io)

**üîÑ –ò—Å—Ç–æ—á–Ω–∏–∫ –¥–∞–Ω–Ω—ã—Ö**  
–°–µ–≥–º–µ–Ω—Ç –ø–µ—Ä–µ–¥–∞—ë—Ç—Å—è –Ω–∞–ø—Ä—è–º—É—é –∏–∑ `PricingTile` —á–µ—Ä–µ–∑ `SharedContextModel`, –¥–∞–ª–µ–µ –ø–æ—Å—Ç—É–ø–∞–µ—Ç –∫–∞–∫ –ø—Ä–æ–ø `flightSegments` –∏ `selectedSegmentIndex`. –†–∞–Ω–µ–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–ª–æ—Å—å —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –≤ `sessionStorage`, –Ω–æ —Ç–µ–ø–µ—Ä—å –¥–∞–Ω–Ω—ã–µ –ø–µ—Ä–µ–¥–∞—é—Ç—Å—è –Ω–∞–ø—Ä—è–º—É—é.

**üß† –ö–ª—é—á–µ–≤—ã–µ –¥–µ—Ç–∞–ª–∏**
- –ö–æ–º–ø–æ–Ω–µ–Ω—Ç `SeatMapComponentPricing` –±–æ–ª—å—à–µ **–Ω–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç sessionStorage**.
- –°–µ–ª–µ–∫—Ç–æ—Ä —Å–µ–≥–º–µ–Ω—Ç–æ–≤ (`SegmentCabinSelector`) —Ä–∞–±–æ—Ç–∞–µ—Ç –Ω–∞ –æ—Å–Ω–æ–≤–µ –ø–æ–ª—É—á–µ–Ω–Ω–æ–≥–æ –º–∞—Å—Å–∏–≤–∞ `flightSegments` –∏ –ø–æ–∑–≤–æ–ª—è–µ—Ç –≤—ã–±–∏—Ä–∞—Ç—å —Ä–µ–π—Å –∏ –∫–ª–∞—Å—Å –æ–±—Å–ª—É–∂–∏–≤–∞–Ω–∏—è.
- –í—ã–±—Ä–∞–Ω–Ω—ã–π —Å–µ–≥–º–µ–Ω—Ç –Ω–æ—Ä–º–∞–ª–∏–∑—É–µ—Ç—Å—è —á–µ—Ä–µ–∑ `normalizeSegment(...)`, —á—Ç–æ–±—ã –ø–æ–ª—É—á–∏—Ç—å –¥–∞–Ω–Ω—ã–µ –≤ –Ω—É–∂–Ω–æ–º —Ñ–æ—Ä–º–∞—Ç–µ.
- –ö–æ–º–ø–æ–Ω–µ–Ω—Ç —Ä–∞–±–æ—Ç–∞–µ—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ –∫–∞–∫ –ø–æ—Å–ª–µ —Å—Ç–∞–¥–∏–∏ Shopping, —Ç–∞–∫ –∏ –ø–æ—Å–ª–µ —Å–æ–∑–¥–∞–Ω–∏—è PNR.

**üì∏ –ü—Ä–∏–∑–Ω–∞–∫ —É—Å–ø–µ—Ö–∞**  
SeatMap –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è —Å –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ–π –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–µ–π: –Ω–æ–º–µ—Ä —Ä–µ–π—Å–∞, –¥–∞—Ç–∞, –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–µ, —Ç–∏–ø —Å–∞–º–æ–ª—ë—Ç–∞. –í–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏—è –≤ iframe ‚Äî –∞–∫—Ç–∏–≤–Ω–∞ –∏ —Ä–µ–∞–≥–∏—Ä—É–µ—Ç –Ω–∞ –≤—ã–±–æ—Ä –∫–ª–∞—Å—Å–∞ –æ–±—Å–ª—É–∂–∏–≤–∞–Ω–∏—è.

**üîß –ü–æ—Å–ª–µ–¥–Ω–∏–π —à–∞–≥**  
–î–æ–±–∞–≤–∏—Ç—å CSS-–∫–ª–∞—Å—Å seatmap-modal-lower –∫ –æ–∫–Ω—É Pricing Tile, —á—Ç–æ–±—ã –ø—Ä–∏–≤–µ—Å—Ç–∏ –≤–Ω–µ—à–Ω–∏–π –≤–∏–¥ –≤ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–µ —Å –¥—Ä—É–≥–∏–º–∏ —Å—Ü–µ–Ω–∞—Ä–∏—è–º–∏ (–Ω–∞–ø—Ä–∏–º–µ—Ä, –∫–∞–∫ –≤ Availability –∏ PNR).